class qs{constructor(e,t,s){this.eventTarget=e,this.eventName=t,this.eventOptions=s,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){const t=Ws(e);for(const s of this.bindings){if(t.immediatePropagationStopped)break;s.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{const s=e.index,r=t.index;return s<r?-1:s>r?1:0})}}function Ws(n){if("immediatePropagationStopped"in n)return n;{const{stopImmediatePropagation:e}=n;return Object.assign(n,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}class Gs{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,s={}){this.application.handleError(e,`Error ${t}`,s)}clearEventListenersForBinding(e){const t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){const{eventTarget:t,eventName:s,eventOptions:r}=e,i=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(s,r);i.delete(o),i.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){const{eventTarget:t,eventName:s,eventOptions:r}=e;return this.fetchEventListener(t,s,r)}fetchEventListener(e,t,s){const r=this.fetchEventListenerMapForEventTarget(e),i=this.cacheKey(t,s);let o=r.get(i);return o||(o=this.createEventListener(e,t,s),r.set(i,o)),o}createEventListener(e,t,s){const r=new qs(e,t,s);return this.started&&r.connect(),r}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){const s=[e];return Object.keys(t).sort().forEach(r=>{s.push(`${t[r]?"":"!"}${r}`)}),s.join(":")}}const Js={stop({event:n,value:e}){return e&&n.stopPropagation(),!0},prevent({event:n,value:e}){return e&&n.preventDefault(),!0},self({event:n,value:e,element:t}){return e?t===n.target:!0}},Xs=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Ys(n){const t=n.trim().match(Xs)||[];let s=t[2],r=t[3];return r&&!["keydown","keyup","keypress"].includes(s)&&(s+=`.${r}`,r=""),{eventTarget:Zs(t[4]),eventName:s,eventOptions:t[7]?Qs(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||r}}function Zs(n){if(n=="window")return window;if(n=="document")return document}function Qs(n){return n.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function er(n){if(n==window)return"window";if(n==document)return"document"}function Kt(n){return n.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function Lt(n){return Kt(n.replace(/--/g,"-").replace(/__/g,"_"))}function Ne(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Jn(n){return n.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function tr(n){return n.match(/[^\s]+/g)||[]}function bn(n){return n!=null}function Mt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const En=["meta","ctrl","alt","shift"];class nr{constructor(e,t,s,r){this.element=e,this.index=t,this.eventTarget=s.eventTarget||e,this.eventName=s.eventName||sr(e)||ze("missing event name"),this.eventOptions=s.eventOptions||{},this.identifier=s.identifier||ze("missing identifier"),this.methodName=s.methodName||ze("missing method name"),this.keyFilter=s.keyFilter||"",this.schema=r}static forToken(e,t){return new this(e.element,e.index,Ys(e.content),t)}toString(){const e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;const t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;const s=t.filter(r=>!En.includes(r))[0];return s?(Mt(this.keyMappings,s)||ze(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[s].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;const t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){const e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:s,value:r}of Array.from(this.element.attributes)){const i=s.match(t),o=i&&i[1];o&&(e[Kt(o)]=rr(r))}return e}get eventTargetName(){return er(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){const[s,r,i,o]=En.map(c=>t.includes(c));return e.metaKey!==s||e.ctrlKey!==r||e.altKey!==i||e.shiftKey!==o}}const An={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:n=>n.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function sr(n){const e=n.tagName.toLowerCase();if(e in An)return An[e](n)}function ze(n){throw new Error(n)}function rr(n){try{return JSON.parse(n)}catch{return n}}class ir{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){const t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){const e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){const{element:t}=this.action,{actionDescriptorFilters:s}=this.context.application,{controller:r}=this.context;let i=!0;for(const[o,c]of Object.entries(this.eventOptions))if(o in s){const f=s[o];i=i&&f({name:o,value:c,event:e,element:t,controller:r})}else continue;return i}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){const{target:t,currentTarget:s}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:s,action:this.methodName})}catch(r){const{identifier:i,controller:o,element:c,index:f}=this,u={identifier:i,controller:o,element:c,index:f,event:e};this.context.handleError(r,`invoking action "${this.action}"`,u)}}willBeInvokedByEvent(e){const t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class Xn{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(s=>this.processMutations(s))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const e=new Set(this.matchElementsInTree());for(const t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(const t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(const t of Array.from(e)){const s=this.elementFromNode(t);s&&this.processTree(s,this.removeElement)}}processAddedNodes(e){for(const t of Array.from(e)){const s=this.elementFromNode(t);s&&this.elementIsActive(s)&&this.processTree(s,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(const s of this.matchElementsInTree(e))t.call(this,s)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}class Yn{constructor(e,t,s){this.attributeName=t,this.delegate=s,this.elementObserver=new Xn(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],s=Array.from(e.querySelectorAll(this.selector));return t.concat(s)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}function or(n,e,t){Zn(n,e).add(t)}function ar(n,e,t){Zn(n,e).delete(t),lr(n,e)}function Zn(n,e){let t=n.get(e);return t||(t=new Set,n.set(e,t)),t}function lr(n,e){const t=n.get(e);t!=null&&t.size==0&&n.delete(e)}class oe{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,s)=>t.concat(Array.from(s)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,s)=>t+s.size,0)}add(e,t){or(this.valuesByKey,e,t)}delete(e,t){ar(this.valuesByKey,e,t)}has(e,t){const s=this.valuesByKey.get(e);return s!=null&&s.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(s=>s.has(e))}getValuesForKey(e){const t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,s])=>s.has(e)).map(([t,s])=>t)}}class cr{constructor(e,t,s,r){this._selector=t,this.details=r,this.elementObserver=new Xn(e,this),this.delegate=s,this.matchesByElement=new oe}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){const{selector:t}=this;if(t){const s=e.matches(t);return this.delegate.selectorMatchElement?s&&this.delegate.selectorMatchElement(e,this.details):s}else return!1}matchElementsInTree(e){const{selector:t}=this;if(t){const s=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(t)).filter(i=>this.matchElement(i));return s.concat(r)}else return[]}elementMatched(e){const{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){const t=this.matchesByElement.getKeysForValue(e);for(const s of t)this.selectorUnmatched(e,s)}elementAttributeChanged(e,t){const{selector:s}=this;if(s){const r=this.matchElement(e),i=this.matchesByElement.has(s,e);r&&!i?this.selectorMatched(e,s):!r&&i&&this.selectorUnmatched(e,s)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}}class ur{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(s=>this.processMutations(s))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){const t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){const s=this.delegate.getStringMapKeyForAttribute(e);if(s!=null){this.stringMap.has(e)||this.stringMapKeyAdded(s,e);const r=this.element.getAttribute(e);if(this.stringMap.get(e)!=r&&this.stringMapValueChanged(r,s,t),r==null){const i=this.stringMap.get(e);this.stringMap.delete(e),i&&this.stringMapKeyRemoved(s,e,i)}else this.stringMap.set(e,r)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,s){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,s)}stringMapKeyRemoved(e,t,s){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,s)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class Qn{constructor(e,t,s){this.attributeObserver=new Yn(e,t,this),this.delegate=s,this.tokensByElement=new oe}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){const[t,s]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(s)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){const t=this.tokensByElement.getValuesForKey(e),s=this.readTokensForElement(e),r=dr(t,s).findIndex(([i,o])=>!fr(i,o));return r==-1?[[],[]]:[t.slice(r),s.slice(r)]}readTokensForElement(e){const t=this.attributeName,s=e.getAttribute(t)||"";return hr(s,e,t)}}function hr(n,e,t){return n.trim().split(/\s+/).filter(s=>s.length).map((s,r)=>({element:e,attributeName:t,content:s,index:r}))}function dr(n,e){const t=Math.max(n.length,e.length);return Array.from({length:t},(s,r)=>[n[r],e[r]])}function fr(n,e){return n&&e&&n.index==e.index&&n.content==e.content}class es{constructor(e,t,s){this.tokenListObserver=new Qn(e,t,this),this.delegate=s,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){const{element:t}=e,{value:s}=this.fetchParseResultForToken(e);s&&(this.fetchValuesByTokenForElement(t).set(e,s),this.delegate.elementMatchedValue(t,s))}tokenUnmatched(e){const{element:t}=e,{value:s}=this.fetchParseResultForToken(e);s&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,s))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}}class pr{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new es(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){const t=new ir(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){const t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){const t=nr.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}}class mr{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new ur(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){const s=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,s.writer(this.receiver[e]),s.writer(s.defaultValue))}stringMapValueChanged(e,t,s){const r=this.valueDescriptorNameMap[t];e!==null&&(s===null&&(s=r.writer(r.defaultValue)),this.invokeChangedCallback(t,e,s))}stringMapKeyRemoved(e,t,s){const r=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,r.writer(this.receiver[e]),s):this.invokeChangedCallback(e,r.writer(r.defaultValue),s)}invokeChangedCallbacksForDefaultValues(){for(const{key:e,name:t,defaultValue:s,writer:r}of this.valueDescriptors)s!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,r(s),void 0)}invokeChangedCallback(e,t,s){const r=`${e}Changed`,i=this.receiver[r];if(typeof i=="function"){const o=this.valueDescriptorNameMap[e];try{const c=o.reader(t);let f=s;s&&(f=o.reader(s)),i.call(this.receiver,c,f)}catch(c){throw c instanceof TypeError&&(c.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${c.message}`),c}}}get valueDescriptors(){const{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){const e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{const s=this.valueDescriptorMap[t];e[s.name]=s}),e}hasValue(e){const t=this.valueDescriptorNameMap[e],s=`has${Ne(t.name)}`;return this.receiver[s]}}class gr{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new oe}start(){this.tokenListObserver||(this.tokenListObserver=new Qn(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var s;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(s=this.tokenListObserver)===null||s===void 0||s.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var s;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(s=this.tokenListObserver)===null||s===void 0||s.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(const e of this.targetsByName.keys)for(const t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function xe(n,e){const t=ts(n);return Array.from(t.reduce((s,r)=>(br(r,e).forEach(i=>s.add(i)),s),new Set))}function yr(n,e){return ts(n).reduce((s,r)=>(s.push(...Er(r,e)),s),[])}function ts(n){const e=[];for(;n;)e.push(n),n=Object.getPrototypeOf(n);return e.reverse()}function br(n,e){const t=n[e];return Array.isArray(t)?t:[]}function Er(n,e){const t=n[e];return t?Object.keys(t).map(s=>[s,t[s]]):[]}class Ar{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new oe,this.outletElementsByName=new oe,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:s}){const r=this.getOutlet(e,s);r&&this.connectOutlet(r,e,s)}selectorUnmatched(e,t,{outletName:s}){const r=this.getOutletFromMap(e,s);r&&this.disconnectOutlet(r,e,s)}selectorMatchElement(e,{outletName:t}){const s=this.selector(t),r=this.hasOutlet(e,t),i=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return s?r&&i&&e.matches(s):!1}elementMatchedAttribute(e,t){const s=this.getOutletNameFromOutletAttributeName(t);s&&this.updateSelectorObserverForOutlet(s)}elementAttributeValueChanged(e,t){const s=this.getOutletNameFromOutletAttributeName(t);s&&this.updateSelectorObserverForOutlet(s)}elementUnmatchedAttribute(e,t){const s=this.getOutletNameFromOutletAttributeName(t);s&&this.updateSelectorObserverForOutlet(s)}connectOutlet(e,t,s){var r;this.outletElementsByName.has(s,t)||(this.outletsByName.add(s,e),this.outletElementsByName.add(s,t),(r=this.selectorObserverMap.get(s))===null||r===void 0||r.pause(()=>this.delegate.outletConnected(e,t,s)))}disconnectOutlet(e,t,s){var r;this.outletElementsByName.has(s,t)&&(this.outletsByName.delete(s,e),this.outletElementsByName.delete(s,t),(r=this.selectorObserverMap.get(s))===null||r===void 0||r.pause(()=>this.delegate.outletDisconnected(e,t,s)))}disconnectAllOutlets(){for(const e of this.outletElementsByName.keys)for(const t of this.outletElementsByName.getValuesForKey(e))for(const s of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(s,t,e)}updateSelectorObserverForOutlet(e){const t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){const t=this.selector(e),s=new cr(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,s),s.start()}setupAttributeObserverForOutlet(e){const t=this.attributeNameForOutletName(e),s=new Yn(this.scope.element,t,this);this.attributeObserverMap.set(e,s),s.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){const e=new oe;return this.router.modules.forEach(t=>{const s=t.definition.controllerConstructor;xe(s,"outlets").forEach(i=>e.add(i,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(s=>s.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class Tr{constructor(e,t){this.logDebugActivity=(s,r={})=>{const{identifier:i,controller:o,element:c}=this;r=Object.assign({identifier:i,controller:o,element:c},r),this.application.logDebugActivity(this.identifier,s,r)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new pr(this,this.dispatcher),this.valueObserver=new mr(this,this.controller),this.targetObserver=new gr(this,this),this.outletObserver=new Ar(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(s){this.handleError(s,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,s={}){const{identifier:r,controller:i,element:o}=this;s=Object.assign({identifier:r,controller:i,element:o},s),this.application.handleError(e,`Error ${t}`,s)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,s){this.invokeControllerMethod(`${Lt(s)}OutletConnected`,e,t)}outletDisconnected(e,t,s){this.invokeControllerMethod(`${Lt(s)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){const s=this.controller;typeof s[e]=="function"&&s[e](...t)}}function Or(n){return wr(n,vr(n))}function wr(n,e){const t=Rr(n),s=Sr(n.prototype,e);return Object.defineProperties(t.prototype,s),t}function vr(n){return xe(n,"blessings").reduce((t,s)=>{const r=s(n);for(const i in r){const o=t[i]||{};t[i]=Object.assign(o,r[i])}return t},{})}function Sr(n,e){return Cr(e).reduce((t,s)=>{const r=_r(n,e,s);return r&&Object.assign(t,{[s]:r}),t},{})}function _r(n,e,t){const s=Object.getOwnPropertyDescriptor(n,t);if(!(s&&"value"in s)){const i=Object.getOwnPropertyDescriptor(e,t).value;return s&&(i.get=s.get||i.get,i.set=s.set||i.set),i}}const Cr=typeof Object.getOwnPropertySymbols=="function"?n=>[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)]:Object.getOwnPropertyNames,Rr=(()=>{function n(t){function s(){return Reflect.construct(t,arguments,new.target)}return s.prototype=Object.create(t.prototype,{constructor:{value:s}}),Reflect.setPrototypeOf(s,t),s}function e(){const s=n(function(){this.a.call(this)});return s.prototype.a=function(){},new s}try{return e(),n}catch{return s=>class extends s{}}})();function Lr(n){return{identifier:n.identifier,controllerConstructor:Or(n.controllerConstructor)}}class Mr{constructor(e,t){this.application=e,this.definition=Lr(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){const t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){const t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new Tr(this,e),this.contextsByScope.set(e,t)),t}}class Nr{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){const t=this.data.get(this.getDataKey(e))||"";return tr(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}}class xr{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){const t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){const s=this.getAttributeNameForKey(e);return this.element.setAttribute(s,t),this.get(e)}has(e){const t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){const t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${Jn(e)}`}}class Fr{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,s){let r=this.warnedKeysByObject.get(e);r||(r=new Set,this.warnedKeysByObject.set(e,r)),r.has(t)||(r.add(t),this.logger.warn(s,e))}}function Nt(n,e){return`[${n}~="${e}"]`}class kr{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,s)=>t||this.findTarget(s)||this.findLegacyTarget(s),void 0)}findAll(...e){return e.reduce((t,s)=>[...t,...this.findAllTargets(s),...this.findAllLegacyTargets(s)],[])}findTarget(e){const t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){const t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){const t=this.schema.targetAttributeForScope(this.identifier);return Nt(t,e)}findLegacyTarget(e){const t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){const t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(s=>this.deprecate(s,e))}getLegacySelectorForTargetName(e){const t=`${this.identifier}.${e}`;return Nt(this.schema.targetAttribute,t)}deprecate(e,t){if(e){const{identifier:s}=this,r=this.schema.targetAttribute,i=this.schema.targetAttributeForScope(s);this.guide.warn(e,`target:${t}`,`Please replace ${r}="${s}.${t}" with ${i}="${t}". The ${r} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}}class Dr{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,s)=>t||this.findOutlet(s),void 0)}findAll(...e){return e.reduce((t,s)=>[...t,...this.findAllOutlets(s)],[])}getSelectorForOutletName(e){const t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){const t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){const t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))}matchesElement(e,t,s){const r=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&r.split(" ").includes(s)}}class jt{constructor(e,t,s,r){this.targets=new kr(this),this.classes=new Nr(this),this.data=new xr(this),this.containsElement=i=>i.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=s,this.guide=new Fr(r),this.outlets=new Dr(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return Nt(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new jt(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class Ir{constructor(e,t,s){this.element=e,this.schema=t,this.delegate=s,this.valueListObserver=new es(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){const{element:t,content:s}=e;return this.parseValueForElementAndIdentifier(t,s)}parseValueForElementAndIdentifier(e,t){const s=this.fetchScopesByIdentifierForElement(e);let r=s.get(t);return r||(r=this.delegate.createScopeForElementAndIdentifier(e,t),s.set(t,r)),r}elementMatchedValue(e,t){const s=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,s),s==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){const s=this.scopeReferenceCounts.get(t);s&&(this.scopeReferenceCounts.set(t,s-1),s==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}class Br{constructor(e){this.application=e,this.scopeObserver=new Ir(this.element,this.schema,this),this.scopesByIdentifier=new oe,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);const t=new Mr(this.application,e);this.connectModule(t);const s=e.controllerConstructor.afterLoad;s&&s.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){const t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){const s=this.modulesByIdentifier.get(t);if(s)return s.contexts.find(r=>r.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){const s=this.scopeObserver.parseValueForElementAndIdentifier(e,t);s?this.scopeObserver.elementMatchedValue(s.element,s):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,s){this.application.handleError(e,t,s)}createScopeForElementAndIdentifier(e,t){return new jt(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(s=>e.connectContextForScope(s))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(s=>e.disconnectContextForScope(s))}}const Pr={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:n=>`data-${n}-target`,outletAttributeForScope:(n,e)=>`data-${n}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Tn("abcdefghijklmnopqrstuvwxyz".split("").map(n=>[n,n]))),Tn("0123456789".split("").map(n=>[n,n])))};function Tn(n){return n.reduce((e,[t,s])=>Object.assign(Object.assign({},e),{[t]:s}),{})}class Ur{constructor(e=document.documentElement,t=Pr){this.logger=console,this.debug=!1,this.logDebugActivity=(s,r,i={})=>{this.debug&&this.logFormattedMessage(s,r,i)},this.element=e,this.schema=t,this.dispatcher=new Gs(this),this.router=new Br(this),this.actionDescriptorFilters=Object.assign({},Js)}static start(e,t){const s=new this(e,t);return s.start(),s}async start(){await Kr(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>{r.controllerConstructor.shouldLoad&&this.router.loadDefinition(r)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>this.router.unloadIdentifier(r))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){const s=this.router.getContextForElementAndIdentifier(e,t);return s?s.controller:null}handleError(e,t,s){var r;this.logger.error(`%s

%o

%o`,t,e,s),(r=window.onerror)===null||r===void 0||r.call(window,t,"",0,0,e)}logFormattedMessage(e,t,s={}){s=Object.assign({application:this},s),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},s)),this.logger.groupEnd()}}function Kr(){return new Promise(n=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>n()):n()})}function jr(n){return xe(n,"classes").reduce((t,s)=>Object.assign(t,$r(s)),{})}function $r(n){return{[`${n}Class`]:{get(){const{classes:e}=this;if(e.has(n))return e.get(n);{const t=e.getAttributeName(n);throw new Error(`Missing attribute "${t}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${Ne(n)}Class`]:{get(){return this.classes.has(n)}}}}function Vr(n){return xe(n,"outlets").reduce((t,s)=>Object.assign(t,Hr(s)),{})}function On(n,e,t){return n.application.getControllerForElementAndIdentifier(e,t)}function wn(n,e,t){let s=On(n,e,t);if(s||(n.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),s=On(n,e,t),s))return s}function Hr(n){const e=Lt(n);return{[`${e}Outlet`]:{get(){const t=this.outlets.find(n),s=this.outlets.getSelectorForOutletName(n);if(t){const r=wn(this,t,n);if(r)return r;throw new Error(`The provided outlet element is missing an outlet controller "${n}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${n}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${s}".`)}},[`${e}Outlets`]:{get(){const t=this.outlets.findAll(n);return t.length>0?t.map(s=>{const r=wn(this,s,n);if(r)return r;console.warn(`The provided outlet element is missing an outlet controller "${n}" instance for host controller "${this.identifier}"`,s)}).filter(s=>s):[]}},[`${e}OutletElement`]:{get(){const t=this.outlets.find(n),s=this.outlets.getSelectorForOutletName(n);if(t)return t;throw new Error(`Missing outlet element "${n}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${s}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(n)}},[`has${Ne(e)}Outlet`]:{get(){return this.outlets.has(n)}}}}function zr(n){return xe(n,"targets").reduce((t,s)=>Object.assign(t,qr(s)),{})}function qr(n){return{[`${n}Target`]:{get(){const e=this.targets.find(n);if(e)return e;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${Ne(n)}Target`]:{get(){return this.targets.has(n)}}}}function Wr(n){const e=yr(n,"values"),t={valueDescriptorMap:{get(){return e.reduce((s,r)=>{const i=ns(r,this.identifier),o=this.data.getAttributeNameForKey(i.key);return Object.assign(s,{[o]:i})},{})}}};return e.reduce((s,r)=>Object.assign(s,Gr(r)),t)}function Gr(n,e){const t=ns(n,e),{key:s,name:r,reader:i,writer:o}=t;return{[r]:{get(){const c=this.data.get(s);return c!==null?i(c):t.defaultValue},set(c){c===void 0?this.data.delete(s):this.data.set(s,o(c))}},[`has${Ne(r)}`]:{get(){return this.data.has(s)||t.hasCustomDefaultValue}}}}function ns([n,e],t){return Zr({controller:t,token:n,typeDefinition:e})}function Ze(n){switch(n){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Le(n){switch(typeof n){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(n))return"array";if(Object.prototype.toString.call(n)==="[object Object]")return"object"}function Jr(n){const{controller:e,token:t,typeObject:s}=n,r=bn(s.type),i=bn(s.default),o=r&&i,c=r&&!i,f=!r&&i,u=Ze(s.type),h=Le(n.typeObject.default);if(c)return u;if(f)return h;if(u!==h){const p=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${p}" must match the defined type "${u}". The provided default value of "${s.default}" is of type "${h}".`)}if(o)return u}function Xr(n){const{controller:e,token:t,typeDefinition:s}=n,i=Jr({controller:e,token:t,typeObject:s}),o=Le(s),c=Ze(s),f=i||o||c;if(f)return f;const u=e?`${e}.${s}`:t;throw new Error(`Unknown value type "${u}" for "${t}" value`)}function Yr(n){const e=Ze(n);if(e)return vn[e];const t=Mt(n,"default"),s=Mt(n,"type"),r=n;if(t)return r.default;if(s){const{type:i}=r,o=Ze(i);if(o)return vn[o]}return n}function Zr(n){const{token:e,typeDefinition:t}=n,s=`${Jn(e)}-value`,r=Xr(n);return{type:r,key:s,name:Kt(s),get defaultValue(){return Yr(t)},get hasCustomDefaultValue(){return Le(t)!==void 0},reader:Qr[r],writer:Sn[r]||Sn.default}}const vn={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Qr={array(n){const e=JSON.parse(n);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${n}" of type "${Le(e)}"`);return e},boolean(n){return!(n=="0"||String(n).toLowerCase()=="false")},number(n){return Number(n.replace(/_/g,""))},object(n){const e=JSON.parse(n);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${n}" of type "${Le(e)}"`);return e},string(n){return n}},Sn={default:ei,array:_n,object:_n};function _n(n){return JSON.stringify(n)}function ei(n){return`${n}`}class se{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:s={},prefix:r=this.identifier,bubbles:i=!0,cancelable:o=!0}={}){const c=r?`${r}:${e}`:e,f=new CustomEvent(c,{detail:s,bubbles:i,cancelable:o});return t.dispatchEvent(f),f}}se.blessings=[jr,zr,Wr,Vr];se.targets=[];se.outlets=[];se.values={};class ti extends se{static targets=["authForm","registerButton","registerButtonText","registerButtonSpinner","loginButton","loginButtonText","loginButtonSpinner"];static values={user:Boolean,isRegistering:Boolean,isLoggingIn:Boolean};connect(){}get isRegistering(){return this.isRegisteringValue}set isRegistering(e){this.isRegisteringValue=e,this.registerButtonTarget.disabled=e,this.registerButtonTextTarget.hidden=e,this.registerButtonSpinnerTarget.hidden=!e}get isLoggingIn(){return this.isLoggingInValue}set isLoggingIn(e){this.isLoggingInValue=e,this.loginButtonTarget.disabled=e,this.loginButtonTextTarget.hidden=e,this.loginButtonSpinnerTarget.hidden=!e}submitRegisterForm(e){this.isRegistering=!0}submitLoginForm(e){this.isLoggingIn=!0}}const ni=Object.freeze(Object.defineProperty({__proto__:null,default:ti},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:ss,setPrototypeOf:Cn,isFrozen:si,getPrototypeOf:ri,getOwnPropertyDescriptor:ii}=Object;let{freeze:j,seal:W,create:rs}=Object,{apply:xt,construct:Ft}=typeof Reflect<"u"&&Reflect;j||(j=function(e){return e});W||(W=function(e){return e});xt||(xt=function(e,t,s){return e.apply(t,s)});Ft||(Ft=function(e,t){return new e(...t)});const qe=$(Array.prototype.forEach),oi=$(Array.prototype.lastIndexOf),Rn=$(Array.prototype.pop),we=$(Array.prototype.push),ai=$(Array.prototype.splice),Ge=$(String.prototype.toLowerCase),Tt=$(String.prototype.toString),Ln=$(String.prototype.match),ve=$(String.prototype.replace),li=$(String.prototype.indexOf),ci=$(String.prototype.trim),G=$(Object.prototype.hasOwnProperty),K=$(RegExp.prototype.test),Se=ui(TypeError);function $(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return xt(n,e,s)}}function ui(n){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Ft(n,t)}}function T(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ge;Cn&&Cn(n,null);let s=e.length;for(;s--;){let r=e[s];if(typeof r=="string"){const i=t(r);i!==r&&(si(e)||(e[s]=i),r=i)}n[r]=!0}return n}function hi(n){for(let e=0;e<n.length;e++)G(n,e)||(n[e]=null);return n}function ne(n){const e=rs(null);for(const[t,s]of ss(n))G(n,t)&&(Array.isArray(s)?e[t]=hi(s):s&&typeof s=="object"&&s.constructor===Object?e[t]=ne(s):e[t]=s);return e}function _e(n,e){for(;n!==null;){const s=ii(n,e);if(s){if(s.get)return $(s.get);if(typeof s.value=="function")return $(s.value)}n=ri(n)}function t(){return null}return t}const Mn=j(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ot=j(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wt=j(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),di=j(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vt=j(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),fi=j(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Nn=j(["#text"]),xn=j(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),St=j(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Fn=j(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),We=j(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),pi=W(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mi=W(/<%[\w\W]*|[\w\W]*%>/gm),gi=W(/\$\{[\w\W]*/gm),yi=W(/^data-[\-\w.\u00B7-\uFFFF]+$/),bi=W(/^aria-[\-\w]+$/),is=W(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ei=W(/^(?:\w+script|data):/i),Ai=W(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),os=W(/^html$/i),Ti=W(/^[a-z][.\w]*(-[.\w]+)+$/i);var kn=Object.freeze({__proto__:null,ARIA_ATTR:bi,ATTR_WHITESPACE:Ai,CUSTOM_ELEMENT:Ti,DATA_ATTR:yi,DOCTYPE_NAME:os,ERB_EXPR:mi,IS_ALLOWED_URI:is,IS_SCRIPT_OR_DATA:Ei,MUSTACHE_EXPR:pi,TMPLIT_EXPR:gi});const Ce={element:1,text:3,progressingInstruction:7,comment:8,document:9},Oi=function(){return typeof window>"u"?null:window},wi=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(s=t.getAttribute(r));const i="dompurify"+(s?"#"+s:"");try{return e.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Dn=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function as(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oi();const e=b=>as(b);if(e.version="3.2.6",e.removed=[],!n||!n.document||n.document.nodeType!==Ce.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const s=t,r=s.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:c,Element:f,NodeFilter:u,NamedNodeMap:h=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:p,DOMParser:O,trustedTypes:v}=n,g=f.prototype,E=_e(g,"cloneNode"),y=_e(g,"remove"),_=_e(g,"nextSibling"),R=_e(g,"childNodes"),C=_e(g,"parentNode");if(typeof o=="function"){const b=t.createElement("template");b.content&&b.content.ownerDocument&&(t=b.content.ownerDocument)}let w,N="";const{implementation:q,createNodeIterator:Z,createDocumentFragment:ce,getElementsByTagName:Be}=t,{importNode:Fs}=s;let U=Dn();e.isSupported=typeof ss=="function"&&typeof C=="function"&&q&&q.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:at,ERB_EXPR:lt,TMPLIT_EXPR:ct,DATA_ATTR:ks,ARIA_ATTR:Ds,IS_SCRIPT_OR_DATA:Is,ATTR_WHITESPACE:qt,CUSTOM_ELEMENT:Bs}=kn;let{IS_ALLOWED_URI:Wt}=kn,F=null;const Gt=T({},[...Mn,...Ot,...wt,...vt,...Nn]);let D=null;const Jt=T({},[...xn,...St,...Fn,...We]);let L=Object.seal(rs(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ee=null,ut=null,Xt=!0,ht=!0,Yt=!1,Zt=!0,ue=!1,Pe=!0,re=!1,dt=!1,ft=!1,he=!1,Ue=!1,Ke=!1,Qt=!0,en=!1;const Ps="user-content-";let pt=!0,Ae=!1,de={},fe=null;const tn=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let nn=null;const sn=T({},["audio","video","img","source","image","track"]);let mt=null;const rn=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),je="http://www.w3.org/1998/Math/MathML",$e="http://www.w3.org/2000/svg",Q="http://www.w3.org/1999/xhtml";let pe=Q,gt=!1,yt=null;const Us=T({},[je,$e,Q],Tt);let Ve=T({},["mi","mo","mn","ms","mtext"]),He=T({},["annotation-xml"]);const Ks=T({},["title","style","font","a","script"]);let Te=null;const js=["application/xhtml+xml","text/html"],$s="text/html";let k=null,me=null;const Vs=t.createElement("form"),on=function(a){return a instanceof RegExp||a instanceof Function},bt=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(me&&me===a)){if((!a||typeof a!="object")&&(a={}),a=ne(a),Te=js.indexOf(a.PARSER_MEDIA_TYPE)===-1?$s:a.PARSER_MEDIA_TYPE,k=Te==="application/xhtml+xml"?Tt:Ge,F=G(a,"ALLOWED_TAGS")?T({},a.ALLOWED_TAGS,k):Gt,D=G(a,"ALLOWED_ATTR")?T({},a.ALLOWED_ATTR,k):Jt,yt=G(a,"ALLOWED_NAMESPACES")?T({},a.ALLOWED_NAMESPACES,Tt):Us,mt=G(a,"ADD_URI_SAFE_ATTR")?T(ne(rn),a.ADD_URI_SAFE_ATTR,k):rn,nn=G(a,"ADD_DATA_URI_TAGS")?T(ne(sn),a.ADD_DATA_URI_TAGS,k):sn,fe=G(a,"FORBID_CONTENTS")?T({},a.FORBID_CONTENTS,k):tn,Ee=G(a,"FORBID_TAGS")?T({},a.FORBID_TAGS,k):ne({}),ut=G(a,"FORBID_ATTR")?T({},a.FORBID_ATTR,k):ne({}),de=G(a,"USE_PROFILES")?a.USE_PROFILES:!1,Xt=a.ALLOW_ARIA_ATTR!==!1,ht=a.ALLOW_DATA_ATTR!==!1,Yt=a.ALLOW_UNKNOWN_PROTOCOLS||!1,Zt=a.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ue=a.SAFE_FOR_TEMPLATES||!1,Pe=a.SAFE_FOR_XML!==!1,re=a.WHOLE_DOCUMENT||!1,he=a.RETURN_DOM||!1,Ue=a.RETURN_DOM_FRAGMENT||!1,Ke=a.RETURN_TRUSTED_TYPE||!1,ft=a.FORCE_BODY||!1,Qt=a.SANITIZE_DOM!==!1,en=a.SANITIZE_NAMED_PROPS||!1,pt=a.KEEP_CONTENT!==!1,Ae=a.IN_PLACE||!1,Wt=a.ALLOWED_URI_REGEXP||is,pe=a.NAMESPACE||Q,Ve=a.MATHML_TEXT_INTEGRATION_POINTS||Ve,He=a.HTML_INTEGRATION_POINTS||He,L=a.CUSTOM_ELEMENT_HANDLING||{},a.CUSTOM_ELEMENT_HANDLING&&on(a.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(L.tagNameCheck=a.CUSTOM_ELEMENT_HANDLING.tagNameCheck),a.CUSTOM_ELEMENT_HANDLING&&on(a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(L.attributeNameCheck=a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),a.CUSTOM_ELEMENT_HANDLING&&typeof a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(L.allowCustomizedBuiltInElements=a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ue&&(ht=!1),Ue&&(he=!0),de&&(F=T({},Nn),D=[],de.html===!0&&(T(F,Mn),T(D,xn)),de.svg===!0&&(T(F,Ot),T(D,St),T(D,We)),de.svgFilters===!0&&(T(F,wt),T(D,St),T(D,We)),de.mathMl===!0&&(T(F,vt),T(D,Fn),T(D,We))),a.ADD_TAGS&&(F===Gt&&(F=ne(F)),T(F,a.ADD_TAGS,k)),a.ADD_ATTR&&(D===Jt&&(D=ne(D)),T(D,a.ADD_ATTR,k)),a.ADD_URI_SAFE_ATTR&&T(mt,a.ADD_URI_SAFE_ATTR,k),a.FORBID_CONTENTS&&(fe===tn&&(fe=ne(fe)),T(fe,a.FORBID_CONTENTS,k)),pt&&(F["#text"]=!0),re&&T(F,["html","head","body"]),F.table&&(T(F,["tbody"]),delete Ee.tbody),a.TRUSTED_TYPES_POLICY){if(typeof a.TRUSTED_TYPES_POLICY.createHTML!="function")throw Se('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof a.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Se('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=a.TRUSTED_TYPES_POLICY,N=w.createHTML("")}else w===void 0&&(w=wi(v,r)),w!==null&&typeof N=="string"&&(N=w.createHTML(""));j&&j(a),me=a}},an=T({},[...Ot,...wt,...di]),ln=T({},[...vt,...fi]),Hs=function(a){let d=C(a);(!d||!d.tagName)&&(d={namespaceURI:pe,tagName:"template"});const m=Ge(a.tagName),S=Ge(d.tagName);return yt[a.namespaceURI]?a.namespaceURI===$e?d.namespaceURI===Q?m==="svg":d.namespaceURI===je?m==="svg"&&(S==="annotation-xml"||Ve[S]):!!an[m]:a.namespaceURI===je?d.namespaceURI===Q?m==="math":d.namespaceURI===$e?m==="math"&&He[S]:!!ln[m]:a.namespaceURI===Q?d.namespaceURI===$e&&!He[S]||d.namespaceURI===je&&!Ve[S]?!1:!ln[m]&&(Ks[m]||!an[m]):!!(Te==="application/xhtml+xml"&&yt[a.namespaceURI]):!1},X=function(a){we(e.removed,{element:a});try{C(a).removeChild(a)}catch{y(a)}},ge=function(a,d){try{we(e.removed,{attribute:d.getAttributeNode(a),from:d})}catch{we(e.removed,{attribute:null,from:d})}if(d.removeAttribute(a),a==="is")if(he||Ue)try{X(d)}catch{}else try{d.setAttribute(a,"")}catch{}},cn=function(a){let d=null,m=null;if(ft)a="<remove></remove>"+a;else{const x=Ln(a,/^[\r\n\t ]+/);m=x&&x[0]}Te==="application/xhtml+xml"&&pe===Q&&(a='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+a+"</body></html>");const S=w?w.createHTML(a):a;if(pe===Q)try{d=new O().parseFromString(S,Te)}catch{}if(!d||!d.documentElement){d=q.createDocument(pe,"template",null);try{d.documentElement.innerHTML=gt?N:S}catch{}}const I=d.body||d.documentElement;return a&&m&&I.insertBefore(t.createTextNode(m),I.childNodes[0]||null),pe===Q?Be.call(d,re?"html":"body")[0]:re?d.documentElement:I},un=function(a){return Z.call(a.ownerDocument||a,a,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Et=function(a){return a instanceof p&&(typeof a.nodeName!="string"||typeof a.textContent!="string"||typeof a.removeChild!="function"||!(a.attributes instanceof h)||typeof a.removeAttribute!="function"||typeof a.setAttribute!="function"||typeof a.namespaceURI!="string"||typeof a.insertBefore!="function"||typeof a.hasChildNodes!="function")},hn=function(a){return typeof c=="function"&&a instanceof c};function ee(b,a,d){qe(b,m=>{m.call(e,a,d,me)})}const dn=function(a){let d=null;if(ee(U.beforeSanitizeElements,a,null),Et(a))return X(a),!0;const m=k(a.nodeName);if(ee(U.uponSanitizeElement,a,{tagName:m,allowedTags:F}),Pe&&a.hasChildNodes()&&!hn(a.firstElementChild)&&K(/<[/\w!]/g,a.innerHTML)&&K(/<[/\w!]/g,a.textContent)||a.nodeType===Ce.progressingInstruction||Pe&&a.nodeType===Ce.comment&&K(/<[/\w]/g,a.data))return X(a),!0;if(!F[m]||Ee[m]){if(!Ee[m]&&pn(m)&&(L.tagNameCheck instanceof RegExp&&K(L.tagNameCheck,m)||L.tagNameCheck instanceof Function&&L.tagNameCheck(m)))return!1;if(pt&&!fe[m]){const S=C(a)||a.parentNode,I=R(a)||a.childNodes;if(I&&S){const x=I.length;for(let V=x-1;V>=0;--V){const te=E(I[V],!0);te.__removalCount=(a.__removalCount||0)+1,S.insertBefore(te,_(a))}}}return X(a),!0}return a instanceof f&&!Hs(a)||(m==="noscript"||m==="noembed"||m==="noframes")&&K(/<\/no(script|embed|frames)/i,a.innerHTML)?(X(a),!0):(ue&&a.nodeType===Ce.text&&(d=a.textContent,qe([at,lt,ct],S=>{d=ve(d,S," ")}),a.textContent!==d&&(we(e.removed,{element:a.cloneNode()}),a.textContent=d)),ee(U.afterSanitizeElements,a,null),!1)},fn=function(a,d,m){if(Qt&&(d==="id"||d==="name")&&(m in t||m in Vs))return!1;if(!(ht&&!ut[d]&&K(ks,d))){if(!(Xt&&K(Ds,d))){if(!D[d]||ut[d]){if(!(pn(a)&&(L.tagNameCheck instanceof RegExp&&K(L.tagNameCheck,a)||L.tagNameCheck instanceof Function&&L.tagNameCheck(a))&&(L.attributeNameCheck instanceof RegExp&&K(L.attributeNameCheck,d)||L.attributeNameCheck instanceof Function&&L.attributeNameCheck(d))||d==="is"&&L.allowCustomizedBuiltInElements&&(L.tagNameCheck instanceof RegExp&&K(L.tagNameCheck,m)||L.tagNameCheck instanceof Function&&L.tagNameCheck(m))))return!1}else if(!mt[d]){if(!K(Wt,ve(m,qt,""))){if(!((d==="src"||d==="xlink:href"||d==="href")&&a!=="script"&&li(m,"data:")===0&&nn[a])){if(!(Yt&&!K(Is,ve(m,qt,"")))){if(m)return!1}}}}}}return!0},pn=function(a){return a!=="annotation-xml"&&Ln(a,Bs)},mn=function(a){ee(U.beforeSanitizeAttributes,a,null);const{attributes:d}=a;if(!d||Et(a))return;const m={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:D,forceKeepAttr:void 0};let S=d.length;for(;S--;){const I=d[S],{name:x,namespaceURI:V,value:te}=I,Oe=k(x),At=te;let B=x==="value"?At:ci(At);if(m.attrName=Oe,m.attrValue=B,m.keepAttr=!0,m.forceKeepAttr=void 0,ee(U.uponSanitizeAttribute,a,m),B=m.attrValue,en&&(Oe==="id"||Oe==="name")&&(ge(x,a),B=Ps+B),Pe&&K(/((--!?|])>)|<\/(style|title)/i,B)){ge(x,a);continue}if(m.forceKeepAttr)continue;if(!m.keepAttr){ge(x,a);continue}if(!Zt&&K(/\/>/i,B)){ge(x,a);continue}ue&&qe([at,lt,ct],yn=>{B=ve(B,yn," ")});const gn=k(a.nodeName);if(!fn(gn,Oe,B)){ge(x,a);continue}if(w&&typeof v=="object"&&typeof v.getAttributeType=="function"&&!V)switch(v.getAttributeType(gn,Oe)){case"TrustedHTML":{B=w.createHTML(B);break}case"TrustedScriptURL":{B=w.createScriptURL(B);break}}if(B!==At)try{V?a.setAttributeNS(V,x,B):a.setAttribute(x,B),Et(a)?X(a):Rn(e.removed)}catch{ge(x,a)}}ee(U.afterSanitizeAttributes,a,null)},zs=function b(a){let d=null;const m=un(a);for(ee(U.beforeSanitizeShadowDOM,a,null);d=m.nextNode();)ee(U.uponSanitizeShadowNode,d,null),dn(d),mn(d),d.content instanceof i&&b(d.content);ee(U.afterSanitizeShadowDOM,a,null)};return e.sanitize=function(b){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=null,m=null,S=null,I=null;if(gt=!b,gt&&(b="<!-->"),typeof b!="string"&&!hn(b))if(typeof b.toString=="function"){if(b=b.toString(),typeof b!="string")throw Se("dirty is not a string, aborting")}else throw Se("toString is not a function");if(!e.isSupported)return b;if(dt||bt(a),e.removed=[],typeof b=="string"&&(Ae=!1),Ae){if(b.nodeName){const te=k(b.nodeName);if(!F[te]||Ee[te])throw Se("root node is forbidden and cannot be sanitized in-place")}}else if(b instanceof c)d=cn("<!---->"),m=d.ownerDocument.importNode(b,!0),m.nodeType===Ce.element&&m.nodeName==="BODY"||m.nodeName==="HTML"?d=m:d.appendChild(m);else{if(!he&&!ue&&!re&&b.indexOf("<")===-1)return w&&Ke?w.createHTML(b):b;if(d=cn(b),!d)return he?null:Ke?N:""}d&&ft&&X(d.firstChild);const x=un(Ae?b:d);for(;S=x.nextNode();)dn(S),mn(S),S.content instanceof i&&zs(S.content);if(Ae)return b;if(he){if(Ue)for(I=ce.call(d.ownerDocument);d.firstChild;)I.appendChild(d.firstChild);else I=d;return(D.shadowroot||D.shadowrootmode)&&(I=Fs.call(s,I,!0)),I}let V=re?d.outerHTML:d.innerHTML;return re&&F["!doctype"]&&d.ownerDocument&&d.ownerDocument.doctype&&d.ownerDocument.doctype.name&&K(os,d.ownerDocument.doctype.name)&&(V="<!DOCTYPE "+d.ownerDocument.doctype.name+`>
`+V),ue&&qe([at,lt,ct],te=>{V=ve(V,te," ")}),w&&Ke?w.createHTML(V):V},e.setConfig=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};bt(b),dt=!0},e.clearConfig=function(){me=null,dt=!1},e.isValidAttribute=function(b,a,d){me||bt({});const m=k(b),S=k(a);return fn(m,S,d)},e.addHook=function(b,a){typeof a=="function"&&we(U[b],a)},e.removeHook=function(b,a){if(a!==void 0){const d=oi(U[b],a);return d===-1?void 0:ai(U[b],d,1)[0]}return Rn(U[b])},e.removeHooks=function(b){U[b]=[]},e.removeAllHooks=function(){U=Dn()},e}var vi=as();class Si extends se{static targets=["loader","progressBar"];connect(){console.log("Loading controller connected")}show(){this.loaderTarget.classList.remove("hidden"),this.progressBarTarget.style.width="0%";let e=0;this.interval=setInterval(()=>{e<90?(e+=5,this.progressBarTarget.style.width=`${e}%`):clearInterval(this.interval)},100)}hide(){clearInterval(this.interval),this.progressBarTarget.style.width="100%",setTimeout(()=>{this.loaderTarget.classList.add("hidden"),this.progressBarTarget.style.width="0%"},200)}}const _i=Object.freeze(Object.defineProperty({__proto__:null,default:Si},Symbol.toStringTag,{value:"Module"}));class Ci extends se{static targets=["fileInput","chatMessages","apiKeyModal","apiKeyInput","apiKeyErrorOutput","showApiKeyTemplate","hideApiKeyTemplate","saveApiKeyButton","saveButtonText","savingButtonText","typingIndicator","filePreviewsContainer","filePreviews","promptInput","askGeminiButton","maskedApiKeyDisplay","askButtonText","askButtonSpinner","chatLoadingOverlay","messagesContainer"];static values={csrfToken:String,initialConvId:String,prompt:String,files:Array,isUploading:Boolean,isTyping:Boolean,apiKey:String,isApiKeyNeeded:Boolean,showApiKey:Boolean,apiKeyError:String,isSavingApiKey:Boolean,professorAvatarUrl:String,maskedApiKey:String,isChatLoading:Boolean,loaded:Boolean,initialMessages:Array};static controllers=["loading"];messageHasFiles=e=>e.files&&e.files.length>0;toggleForm(e){e.preventDefault(),this.registerFormTarget.classList.toggle("hidden"),this.loginFormTarget.classList.toggle("hidden")}messageFileGridClass=e=>e.files.length===1?"grid-cols-1":e.files.length===2?"grid-cols-2":"grid-cols-3";isImageFile=e=>e.type.startsWith("image/");connect(){console.log("Stimulus GeminiAssistantController connected."),this.loadedValue||(console.log("[connect] Calling load()..."),this.load(),this.loadedValue=!0)}async load(){console.log("[load] Function called. Setting isChatLoading to true."),this.isChatLoading=!0;const e=localStorage.getItem("gemini_api_key");console.log("[load] Stored API Key:",e),!e||e.trim()===""?(console.log("[Load] No API key found or it is empty. Showing modal."),this.isApiKeyNeeded=!0,requestAnimationFrame(()=>{this.apiKeyModalTarget.style.display="flex",console.log('[Load - requestAnimationFrame] API Key modal display set to "flex".')})):(console.log("[Load] API key found. Hiding modal."),this.apiKey=e,this.isApiKeyNeeded=!1,this.apiKeyModalTarget.style.display="none"),console.log("[Load] apiKeyModalTarget.style.display after initial load logic:",this.apiKeyModalTarget.style.display),this.apiKey&&(this.maskedApiKey=this.maskApiKey(this.apiKey));const t=this.initialConvIdValue;if(console.log(`[load] convId: ${t}, isApiKeyNeeded: ${this.isApiKeyNeeded}`),!t){console.log("[load] No conversation ID. Hiding loading."),this.isChatLoading=!1,this.displayWelcomeMessage();return}try{console.log("[load] Fetching messages for conversation:",t);const r=await(await fetch(`/assistant/${t}/messages`)).json();console.log("[load] Messages fetched successfully. Data:",r),this.messagesContainerTarget.innerHTML="",r.messages.forEach(i=>{this.addMessageToContainer(i)}),this.scrollChatToBottom()}catch(s){console.error("Failed to load messages:",s)}finally{console.log("[load] Finally block. Setting isChatLoading to false."),this.isChatLoading=!1}}async loadMessages(){console.log("[loadMessages] Function called. Setting isChatLoading to true."),this.isChatLoading=!0;const e=this.initialConvIdValue;if(!e){console.log("[loadMessages] No conversation ID. Hiding loading."),this.isChatLoading=!1;return}try{console.log("[loadMessages] Fetching messages for conversation:",e);const s=await(await fetch(`/assistant/${e}/messages`)).json();console.log("[loadMessages] Messages fetched successfully. Data:",s),this.messagesContainerTarget.querySelectorAll('[id^="temp-"]').forEach(i=>i.remove()),this.messagesContainerTarget.innerHTML="",s.messages.forEach(i=>{this.addMessageToContainer(i)}),this.scrollChatToBottom(),this.application.getControllerForElementAndIdentifier(document.body,"loading").hide()}catch(t){console.error("[loadMessages] Failed to load messages:",t),this.application.getControllerForElementAndIdentifier(document.body,"loading").hide()}finally{console.log("[loadMessages] Finally block. Setting isChatLoading to false."),this.isChatLoading=!1}}get prompt(){return this.promptInputValue}set prompt(e){this.promptInputValue=e}get files(){return this.filesValue}set files(e){this.filesValue=e}get isUploading(){return this.isUploadingValue}set isUploading(e){this.isUploadingValue=e}get isTyping(){return this.isTypingValue}set isTyping(e){this.isTypingValue=e,this.typingIndicatorTarget.hidden=!e,this.askGeminiButtonTarget.disabled=e,this.askButtonTextTarget.hidden=e,this.askButtonSpinnerTarget.hidden=!e,e&&(this.isChatLoading=!1)}get apiKey(){return this.apiKeyValue}set apiKey(e){this.apiKeyValue=e,this.maskedApiKey=this.maskApiKey(e)}get isApiKeyNeeded(){return this.isApiKeyNeededValue}set isApiKeyNeeded(e){this.isApiKeyNeededValue=e}get showApiKey(){return this.showApiKeyValue}set showApiKey(e){this.showApiKeyValue=e,this.apiKeyInputTarget.type=e?"text":"password",this.showApiKeyTemplateTarget.hidden=!e,this.hideApiKeyTemplateTarget.hidden=e}get apiKeyError(){return this.apiKeyErrorValue}set apiKeyError(e){this.apiKeyErrorValue=e,this.apiKeyErrorOutputTarget.textContent=e,this.apiKeyErrorOutputTarget.hidden=!e,this.apiKeyInputTarget.classList.toggle("border-red-500",!!e),this.apiKeyInputTarget.classList.toggle("focus:ring-red-500",!!e),this.apiKeyInputTarget.classList.toggle("border-gray-300",!e),this.apiKeyInputTarget.classList.toggle("focus:ring-blue-500",!e)}get isSavingApiKey(){return this.isSavingApiKeyValue}set isSavingApiKey(e){this.isSavingApiKeyValue=e,this.saveApiKeyButtonTarget.disabled=e,this.saveApiKeyButtonTarget.classList.toggle("opacity-50",e),this.saveApiKeyButtonTarget.classList.toggle("cursor-not-allowed",e),this.saveButtonTextTarget.hidden=e,this.savingButtonTextTarget.hidden=!e}get maskedApiKey(){return this.maskedApiKeyValue}set maskedApiKey(e){this.maskedApiKeyValue=e,this.hasMaskedApiKeyDisplayTarget&&(this.maskedApiKeyDisplayTarget.textContent=e,this.maskedApiKeyDisplayTarget.hidden=!e)}get isChatLoading(){return this.isChatLoadingValue}set isChatLoading(e){console.log(`[isChatLoading setter] Value changed to: ${e}`),this.isChatLoadingValue=e,this.hasChatLoadingOverlayTarget?(console.log(`[isChatLoading setter] chatLoadingOverlayTarget exists. Setting hidden to: ${!e}`),this.chatLoadingOverlayTarget.hidden=!e,e?console.log("[isChatLoading setter] Value is true. Overlay should be visible."):(console.log("[isChatLoading setter] Value is false. Setting timeout to hide overlay."),setTimeout(()=>{this.hasChatLoadingOverlayTarget&&(this.chatLoadingOverlayTarget.hidden=!0,console.log("[isChatLoading setter] Overlay hidden after timeout."))},500))):console.warn("[isChatLoading setter] chatLoadingOverlayTarget not found!")}maskApiKey(e){return!e||e.length<=8?e:e.substring(0,4)+"..."+e.substring(e.length-4)}newChat(e){e.preventDefault(),e.currentTarget.disabled=!0,window.location.href="/assistant/new"}deleteConversation(e){if(e.preventDefault(),confirm("Are you sure you want to delete this conversation?")){const t=e.currentTarget.dataset.conversationId;document.getElementById(`delete-conv-${t}`).submit()}}updatePrompt(e){this.prompt=e.target.value}handlePaste(e){const t=(e.clipboardData||window.clipboardData).items;for(const s of t)if(s.type.indexOf("image")!==-1){const r=s.getAsFile(),i=new File([r],"pasted-image.png",{type:r.type});this.files.push(this.processFile(i))}this.files.length>0&&e.preventDefault(),this.renderFilePreviews()}handleFileSelect(){for(const e of this.fileInputTarget.files)this.files.push(this.processFile(e));this.renderFilePreviews()}removeFile(e){const t=e.currentTarget.dataset.fileId;this.files=this.files.filter(s=>s.id!==t),this.renderFilePreviews()}handleEnter(e){e.shiftKey?this.prompt+=`
`:this.askGemini()}async askGemini(){if(this.isChatLoading)return;if(this.isChatLoading=!0,this.prompt.trim()===""&&this.files.length===0){this.isChatLoading=!1;return}const e=[...this.files],t=this.prompt,s=`temp-${Date.now()}`;this.addMessageToContainer({role:"user",content:t,id:s,files:e.map(i=>({name:i.name,type:i.type,url:i.url}))}),this.scrollChatToBottom(),this.prompt="",this.promptInputTarget.value="",this.files=[],this.hasFileInputTarget&&(this.fileInputTarget.value=""),this.isTyping=!0;const r=[];try{if(e.length>0){this.isUploading=!0;for(const c of e){const f=new FormData;f.append("file",c.rawFile);const u=await fetch("/upload-file",{method:"POST",headers:{"X-CSRF-TOKEN":this.csrfTokenValue},body:f});if(!u.ok){const p=await u.json(),O=p.errors?Object.values(p.errors).flat().join(" "):p.message||"File upload failed";throw new Error(O)}const h=await u.json();r.push(h.fileId)}}const i=await fetch(`/ask-gemini/${this.initialConvIdValue||""}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":this.csrfTokenValue},body:JSON.stringify({prompt:t,fileIds:r,api_key:this.apiKey,conversation_id:this.initialConvIdValue||null})});if(!i.ok){const c=await i.json();throw new Error(c.error||"Failed to send message")}const o=await i.json();await this.loadMessages()}catch(i){console.error("Error asking Gemini:",i),this.addMessageToContainer({role:"assistant",content:`Error: ${i.message}`,files:[]}),this.scrollChatToBottom()}finally{this.isTyping=!1,this.isUploading=!1,this.isChatLoading=!1}}addMessageToContainer(e){const t=`
            <div class="flex ${e.role==="user"?"justify-end":"justify-start"} mb-4" ${e.id?`id="${e.id}"`:""}>
                ${e.role==="assistant"?`
                    <div class="w-8 h-8 rounded-full flex items-center justify-center mr-2 flex-shrink-0 overflow-hidden">
                        <img src="${this.professorAvatarUrlValue}" alt="Professor Avatar" class="w-full h-full object-cover">
                    </div>
                `:""}
                <div class="${e.role==="user"?"bg-blue-600 text-white rounded-bl-md":"bg-white border border-gray-200 rounded-br-md"} p-3 rounded-2xl shadow-sm max-w-xl">
                    ${e.content?`<div class="message-content">${this.renderMarkdown(e.content)}</div>`:""}
                    ${this.messageHasFiles(e)?`
                        <div class="grid ${this.messageFileGridClass(e)} gap-2 mt-2">
                            ${e.files.map(s=>`
                                <div class="relative">
                                    ${this.isImageFile(s)?`<img src="${s.url}" class="rounded-lg max-w-full h-auto">`:`
                                        <div class="w-full h-24 bg-gray-100 rounded-lg flex items-center justify-center">
                                            <span class="text-gray-500 text-xs truncate">${s.name}</span>
                                        </div>
                                    `}
                                </div>
                            `).join("")}
                        </div>
                    `:""}
                </div>
            </div>
        `;this.messagesContainerTarget.insertAdjacentHTML("beforeend",t)}async validateAndSaveApiKey(){console.log("validateAndSaveApiKey function called. - DEBUG"),console.log("Current API Key:",this.apiKey),this.isSavingApiKey=!0,this.apiKeyError="",console.log("Attempting to validate API key...");try{if(!this.apiKey){this.apiKeyError="API Key cannot be empty.";return}const e=await fetch("/validate-api-key",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":this.csrfTokenValue},body:JSON.stringify({api_key:this.apiKey})});if(e.ok)console.log("API Key validated successfully."),localStorage.setItem("gemini_api_key",this.apiKey),this.isApiKeyNeeded=!1,this.apiKeyModalTarget.style.display="none",this.maskedApiKey=this.maskApiKey(this.apiKey);else{const t=await e.json();console.error("API Key validation failed:",t),this.apiKeyError=t.message||"Invalid API Key. Please check your key and try again.",localStorage.removeItem("gemini_api_key"),this.maskedApiKey=""}}catch(e){console.error("Error during API key validation fetch:",e),this.apiKeyError="An error occurred while validating the API key.",localStorage.removeItem("gemini_api_key"),this.maskedApiKey=""}finally{this.isSavingApiKey=!1}}toggleApiKeyVisibility(){console.log("toggleApiKeyVisibility called."),this.showApiKey=!this.showApiKey,this.apiKeyError=""}updateApiKey(e){this.apiKey=e.target.value}processFile(e){const t=URL.createObjectURL(e),s=(e.size/1024).toFixed(1);return{id:t,name:e.name,type:e.type,url:e.type.startsWith("image/")?URL.createObjectURL(e):null,sizeText:`${s} KB`,rawFile:e}}scrollChatToBottom(){this.hasChatMessagesTarget&&(this.chatMessagesTarget.scrollTop=this.chatMessagesTarget.scrollHeight)}triggerFileInput(){this.fileInputTarget.click()}get isPromptEmpty(){return this.prompt.trim()===""&&this.files.length===0}messageHasContent=e=>e.content&&e.content.trim()!=="";renderMarkdown=e=>vi.sanitize(marked.parse(e));renderFilePreviews(){this.files.length>0?(this.filePreviewsContainerTarget.hidden=!1,this.filePreviewsTarget.innerHTML="",this.files.forEach(e=>{const t=`
                    <div class="file-preview relative bg-gray-50 border border-gray-200 rounded-lg p-3">
                        <div class="flex items-center">
                            <div class="w-10 h-10 flex-shrink-0 mr-3">
                                ${this.isImageFile(e)?`<img src="${e.url}" class="w-full h-full rounded-md object-cover">`:`
                                    <div class="w-full h-full rounded-md bg-blue-100 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                        </svg>
                                    </div>
                                `}
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-sm font-medium text-gray-900 truncate">${e.name}</p>
                                <p class="text-xs text-gray-500">${e.sizeText}</p>
                            </div>
                        </div>
                        <button data-action="click->gemini-assistant#removeFile" data-file-id="${e.id}"
                                class="absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors">
                            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                `;this.filePreviewsTarget.insertAdjacentHTML("beforeend",t)})):this.filePreviewsContainerTarget.hidden=!0}displayWelcomeMessage(){console.log("[displayWelcomeMessage] Function called.");const e=`
            <div class="flex flex-col items-center justify-center text-center py-8 px-4">
                <div class="w-24 h-24 rounded-full overflow-hidden mb-4">
                    <img src="${this.professorAvatarUrlValue}" alt="Professor Avatar" class="w-full h-full object-cover">
                </div>
                <h1 class="text-2xl font-semibold text-gray-800 mb-2">Welcome! I am Professor Johnson.</h1>
                <p class="text-gray-600 leading-relaxed max-w-lg">
                    I am here to guide you with your capstone project. Huwag mahiyang magtanong, but make sure your questions are well-
                    thought-out. Let's begin.
                </p>
            </div>
        `;this.messagesContainerTarget.innerHTML=e}}const Ri=Object.freeze(Object.defineProperty({__proto__:null,default:Ci},Symbol.toStringTag,{value:"Module"}));class Li extends se{static values={isLoggingOut:Boolean};connect(){this.updateLogoutButtonState(this.isLoggingOutValue)}get isLoggingOut(){return this.isLoggingOutValue}set isLoggingOut(e){this.isLoggingOutValue=e,this.updateLogoutButtonState(e)}updateLogoutButtonState(e){const t=this.element.querySelector('[data-logout-target="logoutButton"]'),s=this.element.querySelector('[data-logout-target="logoutButtonText"]'),r=this.element.querySelector('[data-logout-target="logoutButtonSpinner"]');t&&(t.disabled=e),s&&(s.hidden=e),r&&(r.hidden=!e)}logout(e){e.preventDefault(),this.isLoggingOut=!0,fetch("/logout",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"}}).then(t=>{t.ok&&(window.location.href="/auth")}).catch(t=>{console.error("Error during logout:",t)}).finally(()=>{this.isLoggingOut=!1})}}const Mi=Object.freeze(Object.defineProperty({__proto__:null,default:Li},Symbol.toStringTag,{value:"Module"}));function ls(n,e){return function(){return n.apply(e,arguments)}}const{toString:Ni}=Object.prototype,{getPrototypeOf:$t}=Object,{iterator:tt,toStringTag:cs}=Symbol,nt=(n=>e=>{const t=Ni.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),J=n=>(n=n.toLowerCase(),e=>nt(e)===n),st=n=>e=>typeof e===n,{isArray:ye}=Array,Me=st("undefined");function Fe(n){return n!==null&&!Me(n)&&n.constructor!==null&&!Me(n.constructor)&&H(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const us=J("ArrayBuffer");function xi(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&us(n.buffer),e}const Fi=st("string"),H=st("function"),hs=st("number"),ke=n=>n!==null&&typeof n=="object",ki=n=>n===!0||n===!1,Je=n=>{if(nt(n)!=="object")return!1;const e=$t(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(cs in n)&&!(tt in n)},Di=n=>{if(!ke(n)||Fe(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Ii=J("Date"),Bi=J("File"),Pi=J("Blob"),Ui=J("FileList"),Ki=n=>ke(n)&&H(n.pipe),ji=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||H(n.append)&&((e=nt(n))==="formdata"||e==="object"&&H(n.toString)&&n.toString()==="[object FormData]"))},$i=J("URLSearchParams"),[Vi,Hi,zi,qi]=["ReadableStream","Request","Response","Headers"].map(J),Wi=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function De(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,r;if(typeof n!="object"&&(n=[n]),ye(n))for(s=0,r=n.length;s<r;s++)e.call(null,n[s],s,n);else{if(Fe(n))return;const i=t?Object.getOwnPropertyNames(n):Object.keys(n),o=i.length;let c;for(s=0;s<o;s++)c=i[s],e.call(null,n[c],c,n)}}function ds(n,e){if(Fe(n))return null;e=e.toLowerCase();const t=Object.keys(n);let s=t.length,r;for(;s-- >0;)if(r=t[s],e===r.toLowerCase())return r;return null}const ie=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fs=n=>!Me(n)&&n!==ie;function kt(){const{caseless:n}=fs(this)&&this||{},e={},t=(s,r)=>{const i=n&&ds(e,r)||r;Je(e[i])&&Je(s)?e[i]=kt(e[i],s):Je(s)?e[i]=kt({},s):ye(s)?e[i]=s.slice():e[i]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&De(arguments[s],t);return e}const Gi=(n,e,t,{allOwnKeys:s}={})=>(De(e,(r,i)=>{t&&H(r)?n[i]=ls(r,t):n[i]=r},{allOwnKeys:s}),n),Ji=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Xi=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Yi=(n,e,t,s)=>{let r,i,o;const c={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),i=r.length;i-- >0;)o=r[i],(!s||s(o,n,e))&&!c[o]&&(e[o]=n[o],c[o]=!0);n=t!==!1&&$t(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Zi=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},Qi=n=>{if(!n)return null;if(ye(n))return n;let e=n.length;if(!hs(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},eo=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&$t(Uint8Array)),to=(n,e)=>{const s=(n&&n[tt]).call(n);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(n,i[0],i[1])}},no=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},so=J("HTMLFormElement"),ro=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,r){return s.toUpperCase()+r}),In=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),io=J("RegExp"),ps=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};De(t,(r,i)=>{let o;(o=e(r,i,n))!==!1&&(s[i]=o||r)}),Object.defineProperties(n,s)},oo=n=>{ps(n,(e,t)=>{if(H(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(H(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},ao=(n,e)=>{const t={},s=r=>{r.forEach(i=>{t[i]=!0})};return ye(n)?s(n):s(String(n).split(e)),t},lo=()=>{},co=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function uo(n){return!!(n&&H(n.append)&&n[cs]==="FormData"&&n[tt])}const ho=n=>{const e=new Array(10),t=(s,r)=>{if(ke(s)){if(e.indexOf(s)>=0)return;if(Fe(s))return s;if(!("toJSON"in s)){e[r]=s;const i=ye(s)?[]:{};return De(s,(o,c)=>{const f=t(o,r+1);!Me(f)&&(i[c]=f)}),e[r]=void 0,i}}return s};return t(n,0)},fo=J("AsyncFunction"),po=n=>n&&(ke(n)||H(n))&&H(n.then)&&H(n.catch),ms=((n,e)=>n?setImmediate:e?((t,s)=>(ie.addEventListener("message",({source:r,data:i})=>{r===ie&&i===t&&s.length&&s.shift()()},!1),r=>{s.push(r),ie.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",H(ie.postMessage)),mo=typeof queueMicrotask<"u"?queueMicrotask.bind(ie):typeof process<"u"&&process.nextTick||ms,go=n=>n!=null&&H(n[tt]),l={isArray:ye,isArrayBuffer:us,isBuffer:Fe,isFormData:ji,isArrayBufferView:xi,isString:Fi,isNumber:hs,isBoolean:ki,isObject:ke,isPlainObject:Je,isEmptyObject:Di,isReadableStream:Vi,isRequest:Hi,isResponse:zi,isHeaders:qi,isUndefined:Me,isDate:Ii,isFile:Bi,isBlob:Pi,isRegExp:io,isFunction:H,isStream:Ki,isURLSearchParams:$i,isTypedArray:eo,isFileList:Ui,forEach:De,merge:kt,extend:Gi,trim:Wi,stripBOM:Ji,inherits:Xi,toFlatObject:Yi,kindOf:nt,kindOfTest:J,endsWith:Zi,toArray:Qi,forEachEntry:to,matchAll:no,isHTMLForm:so,hasOwnProperty:In,hasOwnProp:In,reduceDescriptors:ps,freezeMethods:oo,toObjectSet:ao,toCamelCase:ro,noop:lo,toFiniteNumber:co,findKey:ds,global:ie,isContextDefined:fs,isSpecCompliantForm:uo,toJSONObject:ho,isAsyncFn:fo,isThenable:po,setImmediate:ms,asap:mo,isIterable:go};function A(n,e,t,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}l.inherits(A,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:l.toJSONObject(this.config),code:this.code,status:this.status}}});const gs=A.prototype,ys={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{ys[n]={value:n}});Object.defineProperties(A,ys);Object.defineProperty(gs,"isAxiosError",{value:!0});A.from=(n,e,t,s,r,i)=>{const o=Object.create(gs);return l.toFlatObject(n,o,function(f){return f!==Error.prototype},c=>c!=="isAxiosError"),A.call(o,n.message,e,t,s,r),o.cause=n,o.name=n.name,i&&Object.assign(o,i),o};const yo=null;function Dt(n){return l.isPlainObject(n)||l.isArray(n)}function bs(n){return l.endsWith(n,"[]")?n.slice(0,-2):n}function Bn(n,e,t){return n?n.concat(e).map(function(r,i){return r=bs(r),!t&&i?"["+r+"]":r}).join(t?".":""):e}function bo(n){return l.isArray(n)&&!n.some(Dt)}const Eo=l.toFlatObject(l,{},null,function(e){return/^is[A-Z]/.test(e)});function rt(n,e,t){if(!l.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=l.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,y){return!l.isUndefined(y[E])});const s=t.metaTokens,r=t.visitor||h,i=t.dots,o=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&l.isSpecCompliantForm(e);if(!l.isFunction(r))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(l.isDate(g))return g.toISOString();if(l.isBoolean(g))return g.toString();if(!f&&l.isBlob(g))throw new A("Blob is not supported. Use a Buffer instead.");return l.isArrayBuffer(g)||l.isTypedArray(g)?f&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function h(g,E,y){let _=g;if(g&&!y&&typeof g=="object"){if(l.endsWith(E,"{}"))E=s?E:E.slice(0,-2),g=JSON.stringify(g);else if(l.isArray(g)&&bo(g)||(l.isFileList(g)||l.endsWith(E,"[]"))&&(_=l.toArray(g)))return E=bs(E),_.forEach(function(C,w){!(l.isUndefined(C)||C===null)&&e.append(o===!0?Bn([E],w,i):o===null?E:E+"[]",u(C))}),!1}return Dt(g)?!0:(e.append(Bn(y,E,i),u(g)),!1)}const p=[],O=Object.assign(Eo,{defaultVisitor:h,convertValue:u,isVisitable:Dt});function v(g,E){if(!l.isUndefined(g)){if(p.indexOf(g)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(g),l.forEach(g,function(_,R){(!(l.isUndefined(_)||_===null)&&r.call(e,_,l.isString(R)?R.trim():R,E,O))===!0&&v(_,E?E.concat(R):[R])}),p.pop()}}if(!l.isObject(n))throw new TypeError("data must be an object");return v(n),e}function Pn(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Vt(n,e){this._pairs=[],n&&rt(n,this,e)}const Es=Vt.prototype;Es.append=function(e,t){this._pairs.push([e,t])};Es.toString=function(e){const t=e?function(s){return e.call(this,s,Pn)}:Pn;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function Ao(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function As(n,e,t){if(!e)return n;const s=t&&t.encode||Ao;l.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let i;if(r?i=r(e,t):i=l.isURLSearchParams(e)?e.toString():new Vt(e,t).toString(s),i){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+i}return n}class Un{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){l.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Ts={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},To=typeof URLSearchParams<"u"?URLSearchParams:Vt,Oo=typeof FormData<"u"?FormData:null,wo=typeof Blob<"u"?Blob:null,vo={isBrowser:!0,classes:{URLSearchParams:To,FormData:Oo,Blob:wo},protocols:["http","https","file","blob","url","data"]},Ht=typeof window<"u"&&typeof document<"u",It=typeof navigator=="object"&&navigator||void 0,So=Ht&&(!It||["ReactNative","NativeScript","NS"].indexOf(It.product)<0),_o=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Co=Ht&&window.location.href||"http://localhost",Ro=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ht,hasStandardBrowserEnv:So,hasStandardBrowserWebWorkerEnv:_o,navigator:It,origin:Co},Symbol.toStringTag,{value:"Module"})),P={...Ro,...vo};function Lo(n,e){return rt(n,new P.classes.URLSearchParams,{visitor:function(t,s,r,i){return P.isNode&&l.isBuffer(t)?(this.append(s,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Mo(n){return l.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function No(n){const e={},t=Object.keys(n);let s;const r=t.length;let i;for(s=0;s<r;s++)i=t[s],e[i]=n[i];return e}function Os(n){function e(t,s,r,i){let o=t[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),f=i>=t.length;return o=!o&&l.isArray(r)?r.length:o,f?(l.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!c):((!r[o]||!l.isObject(r[o]))&&(r[o]=[]),e(t,s,r[o],i)&&l.isArray(r[o])&&(r[o]=No(r[o])),!c)}if(l.isFormData(n)&&l.isFunction(n.entries)){const t={};return l.forEachEntry(n,(s,r)=>{e(Mo(s),r,t,0)}),t}return null}function xo(n,e,t){if(l.isString(n))try{return(e||JSON.parse)(n),l.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const Ie={transitional:Ts,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",r=s.indexOf("application/json")>-1,i=l.isObject(e);if(i&&l.isHTMLForm(e)&&(e=new FormData(e)),l.isFormData(e))return r?JSON.stringify(Os(e)):e;if(l.isArrayBuffer(e)||l.isBuffer(e)||l.isStream(e)||l.isFile(e)||l.isBlob(e)||l.isReadableStream(e))return e;if(l.isArrayBufferView(e))return e.buffer;if(l.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Lo(e,this.formSerializer).toString();if((c=l.isFileList(e))||s.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return rt(c?{"files[]":e}:e,f&&new f,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),xo(e)):e}],transformResponse:[function(e){const t=this.transitional||Ie.transitional,s=t&&t.forcedJSONParsing,r=this.responseType==="json";if(l.isResponse(e)||l.isReadableStream(e))return e;if(e&&l.isString(e)&&(s&&!this.responseType||r)){const o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(c){if(o)throw c.name==="SyntaxError"?A.from(c,A.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:P.classes.FormData,Blob:P.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};l.forEach(["delete","get","head","post","put","patch"],n=>{Ie.headers[n]={}});const Fo=l.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ko=n=>{const e={};let t,s,r;return n&&n.split(`
`).forEach(function(o){r=o.indexOf(":"),t=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!t||e[t]&&Fo[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},Kn=Symbol("internals");function Re(n){return n&&String(n).trim().toLowerCase()}function Xe(n){return n===!1||n==null?n:l.isArray(n)?n.map(Xe):String(n)}function Do(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const Io=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function _t(n,e,t,s,r){if(l.isFunction(s))return s.call(this,e,t);if(r&&(e=t),!!l.isString(e)){if(l.isString(s))return e.indexOf(s)!==-1;if(l.isRegExp(s))return s.test(e)}}function Bo(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function Po(n,e){const t=l.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(r,i,o){return this[s].call(this,e,r,i,o)},configurable:!0})})}let z=class{constructor(e){e&&this.set(e)}set(e,t,s){const r=this;function i(c,f,u){const h=Re(f);if(!h)throw new Error("header name must be a non-empty string");const p=l.findKey(r,h);(!p||r[p]===void 0||u===!0||u===void 0&&r[p]!==!1)&&(r[p||f]=Xe(c))}const o=(c,f)=>l.forEach(c,(u,h)=>i(u,h,f));if(l.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(l.isString(e)&&(e=e.trim())&&!Io(e))o(ko(e),t);else if(l.isObject(e)&&l.isIterable(e)){let c={},f,u;for(const h of e){if(!l.isArray(h))throw TypeError("Object iterator must return a key-value pair");c[u=h[0]]=(f=c[u])?l.isArray(f)?[...f,h[1]]:[f,h[1]]:h[1]}o(c,t)}else e!=null&&i(t,e,s);return this}get(e,t){if(e=Re(e),e){const s=l.findKey(this,e);if(s){const r=this[s];if(!t)return r;if(t===!0)return Do(r);if(l.isFunction(t))return t.call(this,r,s);if(l.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Re(e),e){const s=l.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||_t(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let r=!1;function i(o){if(o=Re(o),o){const c=l.findKey(s,o);c&&(!t||_t(s,s[c],c,t))&&(delete s[c],r=!0)}}return l.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let s=t.length,r=!1;for(;s--;){const i=t[s];(!e||_t(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const t=this,s={};return l.forEach(this,(r,i)=>{const o=l.findKey(s,i);if(o){t[o]=Xe(r),delete t[i];return}const c=e?Bo(i):String(i).trim();c!==i&&delete t[i],t[c]=Xe(r),s[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return l.forEach(this,(s,r)=>{s!=null&&s!==!1&&(t[r]=e&&l.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[Kn]=this[Kn]={accessors:{}}).accessors,r=this.prototype;function i(o){const c=Re(o);s[c]||(Po(r,o),s[c]=!0)}return l.isArray(e)?e.forEach(i):i(e),this}};z.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);l.reduceDescriptors(z.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});l.freezeMethods(z);function Ct(n,e){const t=this||Ie,s=e||t,r=z.from(s.headers);let i=s.data;return l.forEach(n,function(c){i=c.call(t,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function ws(n){return!!(n&&n.__CANCEL__)}function be(n,e,t){A.call(this,n??"canceled",A.ERR_CANCELED,e,t),this.name="CanceledError"}l.inherits(be,A,{__CANCEL__:!0});function vs(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new A("Request failed with status code "+t.status,[A.ERR_BAD_REQUEST,A.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Uo(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Ko(n,e){n=n||10;const t=new Array(n),s=new Array(n);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(f){const u=Date.now(),h=s[i];o||(o=u),t[r]=f,s[r]=u;let p=i,O=0;for(;p!==r;)O+=t[p++],p=p%n;if(r=(r+1)%n,r===i&&(i=(i+1)%n),u-o<e)return;const v=h&&u-h;return v?Math.round(O*1e3/v):void 0}}function jo(n,e){let t=0,s=1e3/e,r,i;const o=(u,h=Date.now())=>{t=h,r=null,i&&(clearTimeout(i),i=null),n(...u)};return[(...u)=>{const h=Date.now(),p=h-t;p>=s?o(u,h):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},s-p)))},()=>r&&o(r)]}const Qe=(n,e,t=3)=>{let s=0;const r=Ko(50,250);return jo(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,f=o-s,u=r(f),h=o<=c;s=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:f,rate:u||void 0,estimated:u&&c&&h?(c-o)/u:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};n(p)},t)},jn=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},$n=n=>(...e)=>l.asap(()=>n(...e)),$o=P.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,P.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(P.origin),P.navigator&&/(msie|trident)/i.test(P.navigator.userAgent)):()=>!0,Vo=P.hasStandardBrowserEnv?{write(n,e,t,s,r,i){const o=[n+"="+encodeURIComponent(e)];l.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),l.isString(s)&&o.push("path="+s),l.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ho(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function zo(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Ss(n,e,t){let s=!Ho(e);return n&&(s||t==!1)?zo(n,e):e}const Vn=n=>n instanceof z?{...n}:n;function le(n,e){e=e||{};const t={};function s(u,h,p,O){return l.isPlainObject(u)&&l.isPlainObject(h)?l.merge.call({caseless:O},u,h):l.isPlainObject(h)?l.merge({},h):l.isArray(h)?h.slice():h}function r(u,h,p,O){if(l.isUndefined(h)){if(!l.isUndefined(u))return s(void 0,u,p,O)}else return s(u,h,p,O)}function i(u,h){if(!l.isUndefined(h))return s(void 0,h)}function o(u,h){if(l.isUndefined(h)){if(!l.isUndefined(u))return s(void 0,u)}else return s(void 0,h)}function c(u,h,p){if(p in e)return s(u,h);if(p in n)return s(void 0,u)}const f={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(u,h,p)=>r(Vn(u),Vn(h),p,!0)};return l.forEach(Object.keys({...n,...e}),function(h){const p=f[h]||r,O=p(n[h],e[h],h);l.isUndefined(O)&&p!==c||(t[h]=O)}),t}const _s=n=>{const e=le({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:c}=e;e.headers=o=z.from(o),e.url=As(Ss(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let f;if(l.isFormData(t)){if(P.hasStandardBrowserEnv||P.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((f=o.getContentType())!==!1){const[u,...h]=f?f.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(P.hasStandardBrowserEnv&&(s&&l.isFunction(s)&&(s=s(e)),s||s!==!1&&$o(e.url))){const u=r&&i&&Vo.read(i);u&&o.set(r,u)}return e},qo=typeof XMLHttpRequest<"u",Wo=qo&&function(n){return new Promise(function(t,s){const r=_s(n);let i=r.data;const o=z.from(r.headers).normalize();let{responseType:c,onUploadProgress:f,onDownloadProgress:u}=r,h,p,O,v,g;function E(){v&&v(),g&&g(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let y=new XMLHttpRequest;y.open(r.method.toUpperCase(),r.url,!0),y.timeout=r.timeout;function _(){if(!y)return;const C=z.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),N={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:C,config:n,request:y};vs(function(Z){t(Z),E()},function(Z){s(Z),E()},N),y=null}"onloadend"in y?y.onloadend=_:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(_)},y.onabort=function(){y&&(s(new A("Request aborted",A.ECONNABORTED,n,y)),y=null)},y.onerror=function(){s(new A("Network Error",A.ERR_NETWORK,n,y)),y=null},y.ontimeout=function(){let w=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const N=r.transitional||Ts;r.timeoutErrorMessage&&(w=r.timeoutErrorMessage),s(new A(w,N.clarifyTimeoutError?A.ETIMEDOUT:A.ECONNABORTED,n,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&l.forEach(o.toJSON(),function(w,N){y.setRequestHeader(N,w)}),l.isUndefined(r.withCredentials)||(y.withCredentials=!!r.withCredentials),c&&c!=="json"&&(y.responseType=r.responseType),u&&([O,g]=Qe(u,!0),y.addEventListener("progress",O)),f&&y.upload&&([p,v]=Qe(f),y.upload.addEventListener("progress",p),y.upload.addEventListener("loadend",v)),(r.cancelToken||r.signal)&&(h=C=>{y&&(s(!C||C.type?new be(null,n,y):C),y.abort(),y=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const R=Uo(r.url);if(R&&P.protocols.indexOf(R)===-1){s(new A("Unsupported protocol "+R+":",A.ERR_BAD_REQUEST,n));return}y.send(i||null)})},Go=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,r;const i=function(u){if(!r){r=!0,c();const h=u instanceof Error?u:this.reason;s.abort(h instanceof A?h:new be(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new A(`timeout ${e} of ms exceeded`,A.ETIMEDOUT))},e);const c=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),n=null)};n.forEach(u=>u.addEventListener("abort",i));const{signal:f}=s;return f.unsubscribe=()=>l.asap(c),f}},Jo=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,r;for(;s<t;)r=s+e,yield n.slice(s,r),s=r},Xo=async function*(n,e){for await(const t of Yo(n))yield*Jo(t,e)},Yo=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},Hn=(n,e,t,s)=>{const r=Xo(n,e);let i=0,o,c=f=>{o||(o=!0,s&&s(f))};return new ReadableStream({async pull(f){try{const{done:u,value:h}=await r.next();if(u){c(),f.close();return}let p=h.byteLength;if(t){let O=i+=p;t(O)}f.enqueue(new Uint8Array(h))}catch(u){throw c(u),u}},cancel(f){return c(f),r.return()}},{highWaterMark:2})},it=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Cs=it&&typeof ReadableStream=="function",Zo=it&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Rs=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Qo=Cs&&Rs(()=>{let n=!1;const e=new Request(P.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),zn=64*1024,Bt=Cs&&Rs(()=>l.isReadableStream(new Response("").body)),et={stream:Bt&&(n=>n.body)};it&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!et[e]&&(et[e]=l.isFunction(n[e])?t=>t[e]():(t,s)=>{throw new A(`Response type '${e}' is not supported`,A.ERR_NOT_SUPPORT,s)})})})(new Response);const ea=async n=>{if(n==null)return 0;if(l.isBlob(n))return n.size;if(l.isSpecCompliantForm(n))return(await new Request(P.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(l.isArrayBufferView(n)||l.isArrayBuffer(n))return n.byteLength;if(l.isURLSearchParams(n)&&(n=n+""),l.isString(n))return(await Zo(n)).byteLength},ta=async(n,e)=>{const t=l.toFiniteNumber(n.getContentLength());return t??ea(e)},na=it&&(async n=>{let{url:e,method:t,data:s,signal:r,cancelToken:i,timeout:o,onDownloadProgress:c,onUploadProgress:f,responseType:u,headers:h,withCredentials:p="same-origin",fetchOptions:O}=_s(n);u=u?(u+"").toLowerCase():"text";let v=Go([r,i&&i.toAbortSignal()],o),g;const E=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let y;try{if(f&&Qo&&t!=="get"&&t!=="head"&&(y=await ta(h,s))!==0){let N=new Request(e,{method:"POST",body:s,duplex:"half"}),q;if(l.isFormData(s)&&(q=N.headers.get("content-type"))&&h.setContentType(q),N.body){const[Z,ce]=jn(y,Qe($n(f)));s=Hn(N.body,zn,Z,ce)}}l.isString(p)||(p=p?"include":"omit");const _="credentials"in Request.prototype;g=new Request(e,{...O,signal:v,method:t.toUpperCase(),headers:h.normalize().toJSON(),body:s,duplex:"half",credentials:_?p:void 0});let R=await fetch(g,O);const C=Bt&&(u==="stream"||u==="response");if(Bt&&(c||C&&E)){const N={};["status","statusText","headers"].forEach(Be=>{N[Be]=R[Be]});const q=l.toFiniteNumber(R.headers.get("content-length")),[Z,ce]=c&&jn(q,Qe($n(c),!0))||[];R=new Response(Hn(R.body,zn,Z,()=>{ce&&ce(),E&&E()}),N)}u=u||"text";let w=await et[l.findKey(et,u)||"text"](R,n);return!C&&E&&E(),await new Promise((N,q)=>{vs(N,q,{data:w,headers:z.from(R.headers),status:R.status,statusText:R.statusText,config:n,request:g})})}catch(_){throw E&&E(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new A("Network Error",A.ERR_NETWORK,n,g),{cause:_.cause||_}):A.from(_,_&&_.code,n,g)}}),Pt={http:yo,xhr:Wo,fetch:na};l.forEach(Pt,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const qn=n=>`- ${n}`,sa=n=>l.isFunction(n)||n===null||n===!1,Ls={getAdapter:n=>{n=l.isArray(n)?n:[n];const{length:e}=n;let t,s;const r={};for(let i=0;i<e;i++){t=n[i];let o;if(s=t,!sa(t)&&(s=Pt[(o=String(t)).toLowerCase()],s===void 0))throw new A(`Unknown adapter '${o}'`);if(s)break;r[o||"#"+i]=s}if(!s){const i=Object.entries(r).map(([c,f])=>`adapter ${c} `+(f===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(qn).join(`
`):" "+qn(i[0]):"as no adapter specified";throw new A("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Pt};function Rt(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new be(null,n)}function Wn(n){return Rt(n),n.headers=z.from(n.headers),n.data=Ct.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Ls.getAdapter(n.adapter||Ie.adapter)(n).then(function(s){return Rt(n),s.data=Ct.call(n,n.transformResponse,s),s.headers=z.from(s.headers),s},function(s){return ws(s)||(Rt(n),s&&s.response&&(s.response.data=Ct.call(n,n.transformResponse,s.response),s.response.headers=z.from(s.response.headers))),Promise.reject(s)})}const Ms="1.11.0",ot={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{ot[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const Gn={};ot.transitional=function(e,t,s){function r(i,o){return"[Axios v"+Ms+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,c)=>{if(e===!1)throw new A(r(o," has been removed"+(t?" in "+t:"")),A.ERR_DEPRECATED);return t&&!Gn[o]&&(Gn[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,o,c):!0}};ot.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function ra(n,e,t){if(typeof n!="object")throw new A("options must be an object",A.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let r=s.length;for(;r-- >0;){const i=s[r],o=e[i];if(o){const c=n[i],f=c===void 0||o(c,i,n);if(f!==!0)throw new A("option "+i+" must be "+f,A.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new A("Unknown option "+i,A.ERR_BAD_OPTION)}}const Ye={assertOptions:ra,validators:ot},Y=Ye.validators;let ae=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Un,response:new Un}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=le(this.defaults,t);const{transitional:s,paramsSerializer:r,headers:i}=t;s!==void 0&&Ye.assertOptions(s,{silentJSONParsing:Y.transitional(Y.boolean),forcedJSONParsing:Y.transitional(Y.boolean),clarifyTimeoutError:Y.transitional(Y.boolean)},!1),r!=null&&(l.isFunction(r)?t.paramsSerializer={serialize:r}:Ye.assertOptions(r,{encode:Y.function,serialize:Y.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ye.assertOptions(t,{baseUrl:Y.spelling("baseURL"),withXsrfToken:Y.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&l.merge(i.common,i[t.method]);i&&l.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),t.headers=z.concat(o,i);const c=[];let f=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(f=f&&E.synchronous,c.unshift(E.fulfilled,E.rejected))});const u=[];this.interceptors.response.forEach(function(E){u.push(E.fulfilled,E.rejected)});let h,p=0,O;if(!f){const g=[Wn.bind(this),void 0];for(g.unshift(...c),g.push(...u),O=g.length,h=Promise.resolve(t);p<O;)h=h.then(g[p++],g[p++]);return h}O=c.length;let v=t;for(p=0;p<O;){const g=c[p++],E=c[p++];try{v=g(v)}catch(y){E.call(this,y);break}}try{h=Wn.call(this,v)}catch(g){return Promise.reject(g)}for(p=0,O=u.length;p<O;)h=h.then(u[p++],u[p++]);return h}getUri(e){e=le(this.defaults,e);const t=Ss(e.baseURL,e.url,e.allowAbsoluteUrls);return As(t,e.params,e.paramsSerializer)}};l.forEach(["delete","get","head","options"],function(e){ae.prototype[e]=function(t,s){return this.request(le(s||{},{method:e,url:t,data:(s||{}).data}))}});l.forEach(["post","put","patch"],function(e){function t(s){return function(i,o,c){return this.request(le(c||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ae.prototype[e]=t(),ae.prototype[e+"Form"]=t(!0)});let ia=class Ns{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(c=>{s.subscribe(c),i=c}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,c){s.reason||(s.reason=new be(i,o,c),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Ns(function(r){e=r}),cancel:e}}};function oa(n){return function(t){return n.apply(null,t)}}function aa(n){return l.isObject(n)&&n.isAxiosError===!0}const Ut={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ut).forEach(([n,e])=>{Ut[e]=n});function xs(n){const e=new ae(n),t=ls(ae.prototype.request,e);return l.extend(t,ae.prototype,e,{allOwnKeys:!0}),l.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return xs(le(n,r))},t}const M=xs(Ie);M.Axios=ae;M.CanceledError=be;M.CancelToken=ia;M.isCancel=ws;M.VERSION=Ms;M.toFormData=rt;M.AxiosError=A;M.Cancel=M.CanceledError;M.all=function(e){return Promise.all(e)};M.spread=oa;M.isAxiosError=aa;M.mergeConfig=le;M.AxiosHeaders=z;M.formToJSON=n=>Os(l.isHTMLForm(n)?new FormData(n):n);M.getAdapter=Ls.getAdapter;M.HttpStatusCode=Ut;M.default=M;const{Axios:ya,AxiosError:ba,CanceledError:Ea,isCancel:Aa,CancelToken:Ta,VERSION:Oa,all:wa,Cancel:va,isAxiosError:Sa,spread:_a,toFormData:Ca,AxiosHeaders:Ra,HttpStatusCode:La,formToJSON:Ma,getAdapter:Na,mergeConfig:xa}=M;window.axios=M;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var la=/^(?:.*?(?:controllers|components)\/|\.?\.\/)?(.+)(?:[/_-]controller\..+?)$/;function ca(n,e){n.load(ua(e))}function ua(n){return Object.entries(n).map(ha).filter(e=>e)}function ha([n,e]){var t;const s=da(n),r=(t=e.default)!=null?t:e;if(s&&typeof r=="function")return{identifier:s,controllerConstructor:r}}function da(n){const e=(n.match(la)||[])[1];if(e)return e.replace(/_/g,"-").replace(/\//g,"--")}const zt=Ur.start(),fa=Object.assign({"./controllers/auth_visibility_controller.js":ni,"./controllers/gemini_assistant_controller.js":Ri,"./controllers/loading_controller.js":_i,"./controllers/logout_controller.js":Mi});ca(zt,fa);window.StimulusApplication=zt;window.callGeminiSaveApiKey=()=>{const n=document.querySelector('[data-controller="gemini-assistant"]');if(n){const e=zt.getControllerForElementAndIdentifier(n,"gemini-assistant");e&&typeof e.validateAndSaveApiKey=="function"?(console.log("Manually calling validateAndSaveApiKey from global function."),e.validateAndSaveApiKey()):console.error("GeminiAssistantController or its validateAndSaveApiKey method not found.")}else console.error('Element with data-controller="gemini-assistant" not found.')};
